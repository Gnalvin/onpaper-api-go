# 缓存时间

## Artwork 

作品资料（artwork: profile: *）2小时

根评论内容 （comment: root: *）2小时

根评论列表zsort （artwork: comment: ArtId）7天  如果根评论内容没有缓存，查数据库，**添加到列表**和重置过期时间

子评论内容 （comment: child: *）2小时

子评论列表zsort （comment: replyRoot: RootId）7天 如果子评论内容没有缓存，查数据库，**添加到列表**和重置过期时间

作品点赞和收藏数hash（artwork: count: *）3天 **作品资料**没有缓存，查数据库，**重置过期时间，没有缓存才重置数据**

用户点赞数hash（user: count: *）3天  **作品资料**没有缓存，查数据库，**重置过期时间，没有缓存才重置数据**，因为不同作品过期时间不一定什么时候，不能依靠作品资料过期时间来设置 Author 的数据；当没有缓存时，数据库肯定是最新的（已经落盘MySQL）

作品浏览数（artwork: HLog: *）永远  当落盘MySQL时，删除缓存，落盘数据 = 缓存数+MySQL数 = 总浏览数

```
作品 2小时过期  浏览数 不过期
0 0
用户看到情况 1：作品缓存（数据库数据） + 浏览数缓存(1)
0 1
用户看到情况 2：作品没有缓存（数据库数据） + 浏览数缓存(N)
1 0  刚刚落盘浏览数缓存 2小时后作品缓存过期 数据成最新
用户看到情况 3：作品有缓存（数据库数据） + 浏览数缓存(1)
```



## User

用户资料 （user: profile: *）2小时 点赞收藏粉丝数是从缓存获取存，没有缓存 就是数据库拿 不存在延时

用户页作品 （user: artwork: userId: **page&sort**）2小时

用户页收藏 （user: collect: userId: page）2小时
